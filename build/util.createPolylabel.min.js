ymaps.modules.define("src.config",[],function(t){t({MIN_ZOOM:0,MAX_ZOOM:23,options:["labelLayout","labelDotLayout","labelDotVisible"],zoomRangeOptions:["labelClassName","labelForceVisible","labelTextColor","labelTextSize","labelCenterCoords","labelOffset","labelPermissibleInaccuracyOfVisibility"],properties:[]})}),ymaps.modules.define("src.label.GeoObjectCollection.Label",["util.extend","util.objectKeys","Placemark","src.label.util.LabelPlacemarkOverlay","src.label.GeoObjectCollection.LabelData","src.label.util.layoutTemplates.getBaseLayoutTemplates","src.label.util.layoutTemplates.createLayoutTemplates"],function(t,e,o,a,n,i,l,s){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t(function(){function t(e,o,a){r(this,t),this._map=e,this._polygon=o,this._parentCollection=a,this._placemark={label:null,dot:null},this._layout={label:null,dot:null},this._init()}return t.prototype.setLabelData=function(t,e){return this._data=new i(this._polygon,t,e,this._map,this),this._data},t.prototype.getLabelData=function(){return this._data},t.prototype.getPlacemark=function(t){return this._placemark[t]},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.removeFromCollection=function(){var t=this;this._parentCollection&&(["label","dot"].forEach(function(e){-1!==t._parentCollection.indexOf(t._placemark[e])&&t._parentCollection.remove(t._placemark[e])}),this._polygon=null,this._parentCollection=null,this._placemark=null,this._layout=null,this._data=null)},t.prototype.addToCollection=function(){var t=this;if(!this._parentCollection)return Promise.reject();var e=["label","dot"].map(function(e){return t._placemark[e].getParent()||t._parentCollection.add(t._placemark[e]),t.getLabelLayout(e).then(function(o){t._layout[e]=o})});return Promise.all(e)},t.prototype.getLabelLayout=function(t){return this._placemark[t].getOverlay().then(function(t){return t.getLayout()})},t.prototype._init=function(){var o=this,a=l(),n=s(this._polygon.options.get("labelLayout"),this._polygon.options.get("labelDotLayout"));["label","dot"].forEach(function(i){o._placemark[i]=t._createPlacemark({properties:e({},{labelPolygon:o._polygon},o._polygon.properties.getAll()),options:e({},o._polygon.options.getAll(),n[i])},a[i])})},t._createPlacemark=function(t,o){var i=e({},{iconLayout:o,pointOverlay:n,iconLabelPosition:"absolute"},t.options);return new a([0,0],t.properties,i)},t.prototype.setDataByZoom=function(t,e){var o=this._data.getAll();this.setStyles(o.zoomInfo[t].style),this._data.setZoomData(t);var a=o.zoomInfo,n=o.autoCenter,i=o.dotVisible,l=o.dotSize;a=a[t],this.setCoordinates(a.center||n);var s="auto"===(e=e||a.visibleForce)?a.visible:e;return"dot"!==s||i||(s="none"),this.setVisibility(s),-1!==["dot","label"].indexOf(s)&&this.setCenterAndIconShape(s,"dot"===s?l:a.labelSize,a.labelOffset),{visible:a.visible,visibleForce:a.visibleForce,visibleType:s}},t.prototype.setLayoutTemplate=function(){var t=this,e=s(this._polygon.options.get("labelLayout"),this._polygon.options.get("labelDotLayout"));o(e).forEach(function(o){t._placemark[o].options.set(e[o])})},t.prototype.setCoordinates=function(t){var e=this;t.toString()!==this._placemark.label.geometry.getCoordinates().toString()&&["dot","label"].forEach(function(o){e._placemark[o].geometry.setCoordinates(t)})},t.prototype.setVisibility=function(t){var e=this;o(this._placemark).forEach(function(o){var a=o===t?"places":"phantom";e._placemark[o].options.set({pane:a})})},t.prototype.setStyles=function(t){this._placemark.label.options.set({iconLabelClassName:t.className,iconLabelTextSize:t.textSize,iconLabelTextColor:t.textColor})},t.prototype.setCenterAndIconShape=function(t,e,o){var a=e.height/2,n=e.width/2;this._placemark[t].options.set({iconShape:{type:"Rectangle",coordinates:[[-n+o[0],-a+o[1]],[n+o[0],a+o[1]]]},iconLabelLeft:-n+o[0],iconLabelTop:-a+o[1]})},t.prototype.destroy=function(){this.removeFromCollection()},t}())}),ymaps.modules.define("src.label.GeoObjectCollection.LabelData",["util.objectKeys","src.config","src.util.zoom.parseZoomData","src.util.getPolesOfInaccessibility","GeoObject","src.util.zoom.setOneZoomVisibility"],function(t,e,o,a,n,i,l){function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=o.MIN_ZOOM,c=o.MAX_ZOOM;t(function(){function t(e,o,a,n,i){s(this,t),this._map=n,this._labelInst=i,this._polygon=e,this._data={zoomInfo:{},autoCenter:[0,0],polygonIndex:0,dotSize:{height:0,width:0},dotVisible:"boolean"!=typeof o.labelDotVisible||o.labelDotVisible},this._parsedOptions=this._parseOptions(a),this._init()}return t.prototype.setData=function(t,e){this._data[t]=e},t.prototype.getData=function(t){return this._data[t]},t.prototype.setZoomInfo=function(t,e,o){this._data.zoomInfo[t][e]=o},t.prototype.getZoomInfo=function(t){return t||"number"==typeof t&&0===t?this._data.zoomInfo[t]:this._data.zoomInfo},t.prototype.getPolygonCoords=function(){var t=this._polygon.geometry;return this._polygon instanceof i?t.getCoordinates()[this._data.polygonIndex]:t.coordinates[this._data.polygonIndex]},t.prototype.getAll=function(){return this._data},t.prototype.setZoomData=function(t){2!==this._data.zoomInfo[t].isCalculated&&(l(this._map,t,this._labelInst,"dot"),l(this._map,t,this._labelInst,"label"),this._data.zoomInfo[t].isCalculated=2)},t.prototype.setZoomDataForType=function(t,e){2!==this._data.zoomInfo[e].isCalculated&&l(this._map,e,this._labelInst,t)&&this._data.zoomInfo[e].isCalculated++},t.prototype._init=function(){var t=this._polygon.geometry,e=this._polygon instanceof i?t.getCoordinates():t.coordinates,o=n(e,1);this._data.autoCenter=o.center,this._data.polygonIndex=o.index;for(var a=r;a<=c;a++)this._data.zoomInfo[a]=this._fillZoom(a)},t.prototype._fillZoom=function(t){var e=this._createDefaultZoomInfo();return this._setData(e,"visibleForce",this._parsedOptions.labelForceVisible,t),this._setData(e,"center",this._parsedOptions.labelCenterCoords,t),this._setData(e,"labelOffset",this._parsedOptions.labelOffset,t),this._setData(e,"permissibleInaccuracyOfVisibility",this._parsedOptions.labelPermissibleInaccuracyOfVisibility,t),this._setData(e,"style.className",this._parsedOptions.labelClassName,t),this._setData(e,"style.textSize",this._parsedOptions.labelTextSize,t),this._setData(e,"style.textColor",this._parsedOptions.labelTextColor,t),e},t.prototype._setData=function(t,e,o,a){function n(t,e){t.length>1?n(t.slice(1),e[t[0]]):e[t[0]]=o[a]}var i=e.split(".");o&&o[a]&&n(i,t)},t.prototype._parseOptions=function(t){var o={};return e(t).forEach(function(e){o[e]=a(t[e])}),o},t.prototype._createDefaultZoomInfo=function(){return{isCalculated:0,visible:"none",visibleForce:"auto",center:void 0,style:{className:void 0,textSize:void 0,textColor:void 0},labelSize:{height:0,width:0},labelOffset:[0,0],permissibleInaccuracyOfVisibility:0}},t}())}),ymaps.modules.define("src.label.LabelData",["util.objectKeys","src.config","src.util.zoom.parseZoomData","src.util.getPolesOfInaccessibility","GeoObject","src.util.zoom.setOneZoomVisibility"],function(t,e,o,a,n,i,l){function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=o.MIN_ZOOM,c=o.MAX_ZOOM;t(function(){function t(e,o,a,n,i){s(this,t),this._map=n,this._labelInst=i,this._polygon=e,this._data={zoomInfo:{},autoCenter:[0,0],polygonIndex:0,dotSize:{height:0,width:0},dotFirstZoom:void 0,dotVisible:"boolean"!=typeof o.labelDotVisible||o.labelDotVisible},this._parsedOptions=this._parseOptions(a),this._init()}return t.prototype.setData=function(t,e){this._data[t]=e},t.prototype.getData=function(t){return this._data[t]},t.prototype.setZoomInfo=function(t,e,o){this._data.zoomInfo[t][e]=o},t.prototype.getZoomInfo=function(t){return t||"number"==typeof t&&0===t?this._data.zoomInfo[t]:this._data.zoomInfo},t.prototype.getAll=function(){return this._data},t.prototype.getPolygonCoords=function(){var t=this._polygon.geometry;return this._polygon instanceof i?t.getCoordinates()[this._data.polygonIndex]:t.coordinates[this._data.polygonIndex]},t.prototype.setZoomData=function(t){2!==this._data.zoomInfo[t].isCalculated&&(l(this._map,t,this._labelInst,"dot"),l(this._map,t,this._labelInst,"label"),this._data.zoomInfo[t].isCalculated=2)},t.prototype.setZoomDataForType=function(t,e){2!==this._data.zoomInfo[e].isCalculated&&l(this._map,e,this._labelInst,t)&&this._data.zoomInfo[e].isCalculated++},t.prototype._init=function(){var t=this._polygon.geometry,e=this._polygon instanceof i?t.getCoordinates():t.coordinates,o=n(e,1);this._data.autoCenter=o.center,this._data.polygonIndex=o.index;for(var a=r;a<=c;a++)this._data.zoomInfo[a]=this._fillZoom(a)},t.prototype._fillZoom=function(t){var e=this._createDefaultZoomInfo();return this._setData(e,"visibleForce",this._parsedOptions.labelForceVisible,t),this._setData(e,"center",this._parsedOptions.labelCenterCoords,t),this._setData(e,"labelOffset",this._parsedOptions.labelOffset,t),this._setData(e,"permissibleInaccuracyOfVisibility",this._parsedOptions.labelPermissibleInaccuracyOfVisibility,t),this._setData(e,"style.className",this._parsedOptions.labelClassName,t),this._setData(e,"style.textSize",this._parsedOptions.labelTextSize,t),this._setData(e,"style.textColor",this._parsedOptions.labelTextColor,t),e},t.prototype._setData=function(t,e,o,a){function n(t,e){t.length>1?n(t.slice(1),e[t[0]]):e[t[0]]=o[a]}var i=e.split(".");o&&o[a]&&n(i,t)},t.prototype._parseOptions=function(t){var o={};return e(t).forEach(function(e){o[e]=a(t[e])}),o},t.prototype._createDefaultZoomInfo=function(){return{isCalculated:0,visible:"none",visibleForce:"auto",center:void 0,style:{className:void 0,textSize:void 0,textColor:void 0},labelSize:{height:0,width:0},labelOffset:[0,0],permissibleInaccuracyOfVisibility:0}},t}())}),ymaps.modules.define("src.label.ObjectManager.Label",["util.extend","util.objectKeys","src.label.util.LabelPlacemarkOverlay","src.label.ObjectManager.LabelData","src.label.util.layoutTemplates.getBaseLayoutTemplates","src.label.util.layoutTemplates.createLayoutTemplates"],function(t,e,o,a,n,i,l){function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t(function(){function t(e,o,a){s(this,t),this._map=e,this._polygon=o,this._objectManager=a,this._placemark={label:null,dot:null},this._layout={label:null,dot:null},this._baseLayoutTemplates=null,this.layoutTemplates=null,this._init()}return t.prototype.destroy=function(){this.removeFromCollection()},t.prototype.getPlacemark=function(t){return this._placemark[t]},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.addToObjectManager=function(){var t=this;["label","dot"].forEach(function(e){t._objectManager.add(t._placemark[e])})},t.prototype.removeFromCollection=function(){var t=this;["label","dot"].forEach(function(e){t._objectManager.remove(t._placemark[e])}),this._polygon=null,this._objectManager=null,this._placemark=null,this._layout=null,this._data=null},t.prototype._init=function(){this._baseLayoutTemplates=i(),this._layoutTemplates=l(this._polygon.options.labelLayout,this._polygon.options.labelDotLayout)},t.prototype.createPlacemarks=function(){var o=this;["label","dot"].forEach(function(a){o._placemark[a]=t._createPlacemark(a+"#"+o._polygon.id,{properties:e({},{polygon:o._polygon},o._polygon.properties),options:e({},o._polygon.options,o._layoutTemplates[a])},o._baseLayoutTemplates[a],o._data.getCenterCoords(o._map.getZoom()))})},t._createPlacemark=function(t,o,n,i){return{type:"Feature",id:t,options:e({},{iconLayout:n,iconLabelPosition:"absolute",overlay:a,pane:"phantom"},o.options),properties:o.properties,geometry:{type:"Point",coordinates:i}}},t.prototype._updateOptions=function(t,e){this._objectManager.objects.setObjectOptions(t,e)},t.prototype.createLabelData=function(t,e){return this._data=new n(this._polygon,t,e,this._map,this),this._data},t.prototype.getLabelData=function(){return this._data},t.prototype.setLayout=function(t,e){this._layout[t]=e},t.prototype.setLayoutTemplate=function(){var t=this,e=l(this._polygon.options.labelLayout,this._polygon.options.labelDotLayout);o(e).forEach(function(o){t._updateOptions(t._placemark[o].id,e[o])})},t.prototype.setNewOptions=function(t){var o=this;["dot","label"].forEach(function(a){e(o._placemark[a].options,t),o._updateOptions(o._placemark[a].id,o._placemark[a].options)})},t.prototype.setLabelData=function(t,e){return this._data=new n(this._polygon,t,e,this._map,this),this._data},t.prototype.setDataByZoom=function(t,e,o){var a=this;e.forEach(function(e){if("label"===e){var o=a._data.getStyles(t);a.setStyles({className:o.className,textSize:o.textSize,textColor:o.textColor})}a._data.setVisible(t,e,a._layout[e])});var n=this.setVisibility(o,this._data.getVisibility(t),this._data.getData("dotVisible"));return-1!==["label","dot"].indexOf(n)&&this._data.getSize(t,n)&&(this.setCoordinates(this._data.getCenterCoords(t)),this.setCenterAndIconShape(n,this._data.getSize(t,n),this._data.getOffset(t))),{currentVisibleType:n,currentConfiguredVisibileType:this._data.getVisibility(t)}},t.prototype.setCenterAndIconShape=function(t,e,o){var a=e.height/2,n=e.width/2;this._updateOptions(this._placemark[t].id,{iconShape:{type:"Rectangle",coordinates:[[-n+o[0],-a+o[1]],[n+o[0],a+o[1]]]},iconLabelLeft:-n+o[0],iconLabelTop:-a+o[1]})},t.prototype.setCoordinates=function(t){var e=this;t.toString()!==this._placemark.label.geometry.coordinates.toString()&&["dot","label"].forEach(function(o){e._objectManager.remove(e._placemark[o]),e._generateNewPlacemark(o),e._placemark[o].geometry.coordinates=t,e._objectManager.add(e._placemark[o])})},t.prototype.setStyles=function(t){this._updateOptions(this._placemark.label.id,{iconLabelClassName:t.className,iconLabelTextSize:t.textSize,iconLabelTextColor:t.textColor})},t.prototype.setVisibilityForce=function(t){var e=this;o(this._placemark).forEach(function(o){var a=o===t?"places":"phantom",n=e._objectManager.objects.getById(e._placemark[o].id);n&&n.options.pane!==a&&e._updateOptions(e._placemark[o].id,{pane:a})})},t.prototype.setVisibility=function(t,e,a){var n=this,i=t&&"auto"!==t?t:e;return"dot"!==i||a||(i="none"),o(this._placemark).forEach(function(t){var e=t===i?"places":"phantom",o=n._objectManager.objects.getById(n._placemark[t].id);o&&o.options.pane!==e&&n._updateOptions(n._placemark[t].id,{pane:e})}),i},t.prototype._generateNewPlacemark=function(t){this._placemark[t]=e({},this._placemark[t]);var o=this._placemark[t].id;this._placemark[t].id="_"===o[0]?o.slice(1):"_"+o},t}())}),ymaps.modules.define("src.label.ObjectManager.Label1",["util.extend","util.objectKeys","Placemark","src.label.util.LabelPlacemarkOverlay","src.label.util.createLabelLayoutTemplate","src.label.util.createDotLayoutTemplate","src.label.util.getLabelLayout","src.label.LabelData"],function(t,e,o,a,n,i,l,s,r){function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t(function(){function t(e,o,a){c(this,t),this._polygon=e,this._objectManager=o,this._placemark={label:null,dot:null},this._layout={label:null,dot:null},this._layoutTemplateCache=a,this._init()}return t.prototype.destroy=function(){this.removeFromCollection()},t.prototype.getPlacemark=function(t){return this._placemark[t]},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.addToObjectManager=function(){var t=this;["label","dot"].forEach(function(e){t._objectManager.add(t._placemark[e])})},t.prototype.removeFromCollection=function(){var t=this;["label","dot"].forEach(function(e){t._objectManager.remove(t._placemark[e])}),this._polygon=null,this._objectManager=null,this._placemark=null},t.prototype._init=function(){var o=this,a=this._getLayoutTemplate(this._polygon.options,this._layoutTemplateCache),n={label:a.labelLayout,dot:a.labelDotLayout};["label","dot"].forEach(function(a){o._placemark[a]=t._createPlacemark(a+"#"+o._polygon.id,{properties:e({},{_labelPolygon:o._polygon},o._polygon.properties),options:o._polygon.options},n[a])})},t._createPlacemark=function(t,o,a){return{type:"Feature",id:t,options:e({},{iconLayout:a,iconLabelPosition:"absolute",pointOverlay:n,pane:"phantom"},o.options),properties:o.properties,geometry:{type:"Point",coordinates:[0,0]}}},t.prototype._updateOptions=function(t,e){this._objectManager.objects.setObjectOptions(t,e)},t.prototype.setLabelData=function(t,e){return this._data=new r(this._polygon,t,e),this._data},t.prototype.getLabelData=function(){return this._data},t.prototype.setLayout=function(t,e){this._layout[t]=e},t.prototype.setDataByZoom=function(t,e){var o=this._data.getAll(),a=o.zoomInfo,n=o.autoCenter,i=o.dotVisible;a=a[t],this.setCoordinates(a.center||n);var l="auto"===(e=e||a.visibleForce)?a.visible:e;return"dot"!==l||i||(l="none"),this.setVisibility(l),-1!==["dot","label"].indexOf(l)&&this.setCenterAndIconShape(l,"dot"===l?this._data.getData("dotSize"):a.labelSize,a.labelOffset),this.setStyles(a.style),{visible:a.visible,visibleForce:a.visibleForce,visibleType:l}},t.prototype.setCenterAndIconShape=function(t,e,o){var a=e.height/2,n=e.width/2;this._updateOptions(this._placemark[t].id,{iconShape:{type:"Rectangle",coordinates:[[-n+o[1],-a+o[0]],[n+o[1],a+o[0]]]},iconLabelTop:-a+o[0],iconLabelLeft:-n+o[1]})},t.prototype.setCoordinates=function(t){var e=this;t.toString()!==this._placemark.label.geometry.coordinates.toString()&&["dot","label"].forEach(function(o){e._objectManager.remove(e._placemark[o]),e._generateNewPlacemark(o),e._placemark[o].geometry.coordinates=t,e._objectManager.add(e._placemark[o])})},t.prototype.setStyles=function(t){this._updateOptions(this._placemark.label.id,{iconLabelClassName:t.className,iconLabelTextSize:t.textSize,iconLabelTextColor:t.textColor})},t.prototype.setVisibility=function(t){var e=this;o(this._placemark).forEach(function(o){var a=o===t?"places":"phantom";e._updateOptions(e._placemark[o].id,{pane:a})})},t.prototype._generateNewPlacemark=function(t){this._placemark[t]=e({},this._placemark[t]);var o=this._placemark[t].id;this._placemark[t].id="_"===o[0]?o.slice(1):"_"+o},t.prototype._getLayoutTemplate=function(t,e){return["labelLayout","labelDotLayout"].reduce(function(o,a){var n=t[a],s=n||"default"+a;if(e[s])o[a]=e[s];else{var r={labelLayout:i,labelDotLayout:l}[a](n);o[a]=r,e[s]=r}return o},{})},t}())}),ymaps.modules.define("src.label.ObjectManager.LabelData",["util.objectKeys","src.config","src.util.zoom.parseZoomData","src.util.getPolesOfInaccessibility","src.util.zoom.setZoomVisibility"],function(t,e,o,a,n,i){function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=o.MIN_ZOOM,r=o.MAX_ZOOM;t(function(){function t(e,o,a,n,i){l(this,t),this._map=n,this._label=i,this._polygon=e,this._data={zoomInfo:{},autoCenter:[0,0],polygonIndex:0,dotVisible:"boolean"!=typeof o.labelDotVisible||o.labelDotVisible},this.parsedOptions=this._parseOptions(a),this._init()}return t.prototype.setData=function(t,e){this._data[t]=e},t.prototype.getData=function(t){return this._data[t]},t.prototype.setZoomInfo=function(t,e,o){this._data.zoomInfo[t][e]=o},t.prototype.getZoomInfo=function(t){return t||"number"==typeof t&&0===t?this._data.zoomInfo[t]:this._data.zoomInfo},t.prototype.getPolygonCoords=function(){return this._polygon.geometry.coordinates[this._data.polygonIndex]},t.prototype.getCenterCoords=function(t){return this.parsedOptions.labelCenterCoords&&this.parsedOptions.labelCenterCoords[t]||this._data.autoCenter},t.prototype.getStyles=function(t){return{className:this.parsedOptions.labelClassName&&this.parsedOptions.labelClassName[t],textSize:this.parsedOptions.labelTextSize&&this.parsedOptions.labelTextSize[t],textColor:this.parsedOptions.labelTextColor&&this.parsedOptions.labelTextColor[t]}},t.prototype.getVisibility=function(t){return this.parsedOptions.labelForceVisible&&this.parsedOptions.labelForceVisible[t]||this._data.zoomInfo[t].visible},t.prototype.getOffset=function(t){return this.parsedOptions.labelOffset&&this.parsedOptions.labelOffset[t]||[0,0]},t.prototype.getPermissibleInaccuracyOfVisibility=function(t){return this.parsedOptions.labelPermissibleInaccuracyOfVisibility&&this.parsedOptions.labelPermissibleInaccuracyOfVisibility[t]||0},t.prototype.getSize=function(t,e){return this._data.zoomInfo[t][e+"Size"]},t.prototype.setVisible=function(t,e,o){if(!this._data.zoomInfo[t][e+"Size"]){var a=i(e,this._map,t,this._data.zoomInfo[t].visible,o,this.getCenterCoords(t),this.getPolygonCoords(),this.getOffset(t),this.getPermissibleInaccuracyOfVisibility(t));a&&(this._data.zoomInfo[t].visible=a.visible,this._data.zoomInfo[t][e+"Size"]=a.size)}},t.prototype._init=function(){var t=n(this._polygon.geometry.coordinates,1);this._data.autoCenter=t.center,this._data.polygonIndex=t.index;for(var e=s;e<=r;e++)this._data.zoomInfo[e]=this._fillZoom(e)},t.prototype._fillZoom=function(t){return this._createDefaultZoomInfo()},t.prototype._parseOptions=function(t){var o={};return e(t).forEach(function(e){o[e]=a(t[e])}),o},t.prototype._createDefaultZoomInfo=function(){return{visible:"none",dotSize:void 0,labelSize:void 0}},t}())}),ymaps.modules.define("src.label.ObjectManager.setZoomVisibility",["src.util.zoom.getFirstZoomInside","src.label.util.getLayoutSize"],function(t,e,o){function a(t,e,o){var a=["none","dot","label"],n=t;return o&&(n=a.indexOf(e)>a.indexOf(t)?e:t),n}var n={label:function(t,n,i,l,s,r,c,p){var u=o(l);if(u)return{visible:a(i,"label",n>=e(t,s,r,u,c,p)),labelSize:u}},dot:function(t,n,i,l,s,r,c,p){var u=o(l);if(u)return{visible:a(i,"dot",n>=e(t,s,r,u,c,p)),dotSize:u}}};t(function(t,e,o,a,i,l,s,r,c){return n[t](e,o,a,i,l,s,r,c)})}),ymaps.modules.define("src.label.util.createDotLayoutTemplate",["templateLayoutFactory"],function(t,e){t(function(t){return void 0===t&&(t="<div {% style %}background-color: red;\n    width: 10px; height: 10px; border-radius: 50px;{% endstyle %}></div>"),e.createClass("\n    <div {% style %}position: {{options.labelPosition}};\n        top: {{options.labelTop}}px; left: {{options.labelLeft}}px; {% endstyle %}>\n        "+t+"\n    </div>")})}),ymaps.modules.define("src.label.util.createLabelLayoutTemplate",["templateLayoutFactory"],function(t,e){t(function(t){return e.createClass('\n    <div {% style %}position: {{options.labelPosition}};\n        top: {{options.labelTop}}px; left: {{options.labelLeft}}px; {% endstyle %}>\n        <div class="{{options.labelClassName}}"\n            {% style %}text-align: center; font-size: {{options.labelTextSize}}px;\n            color: {{options.labelTextColor}}; {% endstyle %}>\n            '+t+"\n        </div>\n    </div>")})}),ymaps.modules.define("src.label.util.getLabelLayout",[],function(t){t(function(t){return t.getOverlay().then(function(t){return t.getLayout()})})}),ymaps.modules.define("src.label.util.getLayoutSize",[],function(t){t(function(t){var e=t&&t.getElement();if(e){for(var o=0,a=0;0===o&&0===a&&(e=e.children[0]);){var n=e.getBoundingClientRect();o=n.width,a=n.height}return{width:o,height:a}}})}),ymaps.modules.define("src.label.util.getLayoutTemplate",["src.label.util.layoutTemplates.labelLayoutTemplate","src.label.util.layoutTemplates.dotLayoutTemplate"],function(t,e,o){t(function(){return{label:e,dot:o}})}),ymaps.modules.define("src.label.util.LabelPlacemarkOverlay",["util.defineClass","overlay.Placemark","GeoObject"],function(t,e,o,a){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}t(function(t){function o(e,a,l){return n(this,o),i(this,t.call(this,e,a,l))}return e(o,t),o.prototype.getData=function(){var t=this._data.geoObject instanceof a?this._data.geoObject.properties.get("labelPolygon"):this._data.properties.polygon;return{geoObject:t,properties:t.properties,state:t.state}},o}(o))}),ymaps.modules.define("src.label.util.layoutTemplates.createLayoutTemplates",["templateLayoutFactory"],function(t,e){t(function(t,o){return{label:{iconLabelTemplateLayout:e.createClass(t)},dot:{iconLabelDotTemplateLayout:e.createClass(o||"<div {% style %}background-color: red;\nwidth: 10px; height: 10px; border-radius: 50px;{% endstyle %}></div>")}}})}),ymaps.modules.define("src.label.util.layoutTemplates.dotLayoutTemplate",["templateLayoutFactory"],function(t,e){t(e.createClass("\n    <div {% style %}position: {{options.labelPosition}};\n        top: {{options.labelTop}}px; left: {{options.labelLeft}}px; {% endstyle %}>\n            {% include options.labelDotTemplateLayout %}\n        </div>"))}),ymaps.modules.define("src.label.util.layoutTemplates.getBaseLayoutTemplates",["src.label.util.layoutTemplates.labelLayoutTemplate","src.label.util.layoutTemplates.dotLayoutTemplate"],function(t,e,o){t(function(){return{label:e,dot:o}})}),ymaps.modules.define("src.label.util.layoutTemplates.getLayoutTemplate",["src.label.util.layoutTemplates.labelLayoutTemplate","src.label.util.layoutTemplates.dotLayoutTemplate"],function(t,e,o){t(function(){return{label:e,dot:o}})}),ymaps.modules.define("src.label.util.layoutTemplates.getTemplateLayouts",[],function(t){t(function(){return{label:{iconLabelTemplateLayout:ymaps.templateLayoutFactory.createClass(this._polygon.options.get("labelLayout"))},dot:{iconLabelDotTemplateLayout:ymaps.templateLayoutFactory.createClass(this._polygon.options.get("labelDotLayout","<div {% style %}background-color: red;\n            width: 10px; height: 10px; border-radius: 50px;{% endstyle %}></div>"))}}})}),ymaps.modules.define("src.label.util.layoutTemplates.labelLayoutTemplate",["templateLayoutFactory"],function(t,e){t(e.createClass('\n    <div {% style %}position: {{options.labelPosition}};\n        top: {{options.labelTop}}px; left: {{options.labelLeft}}px; {% endstyle %}>\n        <div class="{{options.labelClassName}}"\n            {% style %}text-align: center; font-size: {{options.labelTextSize}}px;\n            color: {{options.labelTextColor}}; {% endstyle %}>\n                {% include options.labelTemplateLayout %}\n            </div>\n        </div>'))}),ymaps.modules.define("src.polylabel.PolylabelBase",["src.config","GeoObject"],function(t,e,o){function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t(function(){function t(e){a(this,t),this._map=e}return t.prototype.initMapListeners=function(t){this._mapBoundsChangeCallback=t,this._map.events.add(["boundschange","dblclick"],this._mapEventsHandler,this)},t.prototype.destroyMapListeners=function(){this._map.events.remove(["boundschange","dblclick"],this._mapEventsHandler,this)},t.prototype._mapEventsHandler=function(t){switch(t.get("type")){case"boundschange":t.get("newZoom")!==t.get("oldZoom")&&this._mapBoundsChangeCallback("boundschange");break;case"dblclick":this._mapBoundsChangeCallback("dblclick")}},t.prototype.getOptions=function(t){return e.options.reduce(function(e,a){return e[a]=t instanceof o?t.options.get(a):t.options[a],e},{})},t.prototype.getZoomRangeOptions=function(t){return e.zoomRangeOptions.reduce(function(e,a){return e[a]=t instanceof o?t.options.get(a):t.options[a],e},{})},t.prototype.getProperties=function(t){return e.properties.reduce(function(e,a){return e[a]=t instanceof o?t.properties.get(a):t.properties[a],e},{})},t}())}),ymaps.modules.define("src.polylabel.PolylabelCollection",["util.defineClass","src.polylabel.PolylabelBase","src.label.GeoObjectCollection.Label","GeoObjectCollection","Monitor","system.nextTick","data.Manager","event.Manager","Event"],function(t,e,o,a,n,i,l,s,r,c){function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}t(function(t){function o(e,a){p(this,o);var i=u(this,t.call(this,e));return i._map=e,i._labelsCollection=new n,i._labelsState=new WeakMap,i._polygonsCollection=a,i._currentConfiguredVisibility=new WeakMap,i._currentVisibility=new WeakMap,i._isPolygonParentChange=new WeakMap,i._initData(),i}return e(o,t),o.prototype.destroy=function(){this._deleteLabelStateListeners(),this._deletePolygonsListeners(),this._deletePolygonCollectionListeners(),this._deleteLabelCollection(),this._map.geoObjects.remove(this._labelsCollection)},o.prototype.getLabelState=function(t){return this._labelsState.get(t)},o.prototype.getConfiguredVisibility=function(t){return this._currentConfiguredVisibility.get(t)},o.prototype.getCurrentVisibility=function(t){return this._currentVisibility.get(t)},o.prototype._initData=function(){var t=this;this._map.geoObjects.add(this._labelsCollection),this._firstCalculatePolygonsCollection().then(function(){t._initMapListeners(),t._initPolygonCollectionListeners(),t._initPolygonsListeners(),t._initLabelCollectionListeners()})},o.prototype._firstCalculatePolygonsCollection=function(){var t=this;this._clearLabelCollection();var e=[];return this._polygonsCollection.each(function(o){t._setInLabelState(o,"visible",void 0),t._initLabelStateListener(o),t._calculatePolygonLabelData(o).then(function(a){t._setInLabelState(o,"label",a),e.push(t._analyzeAndSetLabelData(o,t._getFromLabelState(o,"label")))})}),Promise.all(e)},o.prototype._calculatePolygonsCollection=function(){var t=this,e=[];return this._polygonsCollection.each(function(o){e.push(t._analyzeAndSetLabelData(o,t._getFromLabelState(o,"label")))}),Promise.all(e)},o.prototype._clearLabelCollection=function(){this._labelsCollection.removeAll(),this._labelsCollection.options.set({pane:"phantom"})},o.prototype._deleteLabelCollection=function(){var t=this;this._polygonsCollection.each(function(e){var o=t._getFromLabelState(e,"label");o&&o.destroy()}),this._clearLabelCollection()},o.prototype._calculatePolygonLabelData=function(t,e){var o=this.getOptions(t),n=this.getZoomRangeOptions(t),i=e?this._getFromLabelState(t,"label"):new a(this._map,t,this._labelsCollection);return i.setLabelData(o,n),i.addToCollection().then(function(){return i})},o.prototype._analyzeAndSetLabelData=function(t,e,o){var a=this;return e?(l(function(){var n=e.setDataByZoom(a._map.getZoom(),o);a._setCurrentConfiguredVisibility(t,n.visible,n.visibleForce),a._setCurrentVisibility(t,n.visibleType)}),Promise.resolve()):Promise.resolve()},o.prototype._setCurrentConfiguredVisibility=function(t,e,o){var a=o&&-1!==["dot","label","none"].indexOf(o)?o:e;this._currentConfiguredVisibility.set(t,a)},o.prototype._setCurrentVisibility=function(t,e){this._currentVisibility.set(t,-1!==["dot","label"].indexOf(e)?e:"none")},o.prototype._recalculateNewPolygon=function(t){var e=this;this._calculatePolygonLabelData(t).then(function(o){e._setInLabelState(t,"label",o),e._analyzeAndSetLabelData(t,e._getFromLabelState(t,"label")),e._initLabelStateListener(t)})},o.prototype._setInLabelState=function(t,e,o){var a=this._labelsState.get(t);a||(a=new s,this._labelsState.set(t,a)),a.set(e,o)},o.prototype._getFromLabelState=function(t,e){var o=this._labelsState.get(t);if(o)return o.get(e)},o.prototype._clearVisibilityInLabelsState=function(t){var e=this;this._polygonsCollection.each(function(o){e._setInLabelState(o,"visible",t)})},o.prototype._initLabelStateListener=function(t){var e=this,o=new i(this._labelsState.get(t));this._setInLabelState(t,"labelMonitor",o),o.add("visible",function(o){e._analyzeAndSetLabelData(t,e._getFromLabelState(t,"label"),o)})},o.prototype._initPolygonsListeners=function(){var t=this;this._polygonsCollection.each(function(e){t._initPolygonListener(e)})},o.prototype._initPolygonListener=function(t){t.events.add(["optionschange","propertieschange"],this._onPolygonOptionsChangeHandler,this),t.events.add("parentchange",this._onPolygonParentChangeHandler,this)},o.prototype._onPolygonParentChangeHandler=function(t){this._isPolygonParentChange.set(t.get("target"),2)},o.prototype._onPolygonOptionsChangeHandler=function(t){var e=this;l(function(){var o=t.get("target"),a=e._getFromLabelState(o,"label"),n=e._isPolygonParentChange.get(o);n>0||!a?e._isPolygonParentChange.set(t.get("target"),n-1):(a.setVisibility("phantom"),a.setLayoutTemplate(),e._calculatePolygonLabelData(o,!0).then(function(t){e._setInLabelState(o,"label",t),e._analyzeAndSetLabelData(o,e._getFromLabelState(o,"label"))}))})},o.prototype._initPolygonCollectionListeners=function(){this._polygonsCollection.events.add(["add","remove"],this._polygonCollectionEventHandler,this)},o.prototype._polygonCollectionEventHandler=function(t){switch(t.get("type")){case"add":this._recalculateNewPolygon(t.get("child"));break;case"remove":this._deleteLabelStateListener(t.get("child"));var e=this._getFromLabelState(t.get("child"),"label");e&&e.destroy()}},o.prototype._initLabelCollectionListeners=function(){var t=new r({controllers:[{onBeforeEventFiring:function(t,e,o){if("phantom"===o.get("target").options.get("pane"))return!1;var a=o.get("target").properties.get("labelPolygon");if(a){var n=new c({target:a,type:"label"+e},o);a.events.fire("label"+e,n)}return!1}}]});this._labelsCollection.events.setParent(t)},o.prototype._initMapListeners=function(){var t=this;this.initMapListeners(function(){t._clearVisibilityInLabelsState(),t._calculatePolygonsCollection()})},o.prototype._deleteLabelStateListeners=function(){var t=this;this._polygonsCollection.each(function(e){t._deleteLabelStateListener(e)})},o.prototype._deleteLabelStateListener=function(t){var e=this._getFromLabelState(t,"labelMonitor");e&&e.removeAll()},o.prototype._deletePolygonCollectionListeners=function(){this._polygonsCollection.events.remove(["add","remove"],this._polygonCollectionEventHandler,this),this.destroyMapListeners()},o.prototype._deletePolygonsListeners=function(){var t=this;this._polygonsCollection.each(function(e){t._deletePolygonListener(e)})},o.prototype._deletePolygonListener=function(t){t.events.remove(["optionschange","propertieschange"],this._onPolygonOptionsChangeHandler,this),t.events.remove("parentchange",this._onPolygonParentChangeHandler,this)},o}(o))}),ymaps.modules.define("src.polylabel.PolylabelObjectManager",["util.defineClass","src.polylabel.PolylabelBase","data.Manager","Monitor","ObjectManager","src.label.ObjectManager.Label","system.nextTick","event.Manager"],function(t,e,o,a,n,i,l,s,r){function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}t(function(t){function o(e,a){c(this,o);var n=p(this,t.call(this,e));return n._map=e,n._polygonsObjectManager=a,n._labelsObjectManager=new i,n._labelsState=new WeakMap,n._currentConfiguredVisibility=new WeakMap,n._currentVisibility=new WeakMap,n._init(),n}return e(o,t),o.prototype.destroy=function(){this._deleteLabelsOverlaysListeners(),this._deleteLabelStateListeners(),this._deletePolygonsListeners(),this._deletePolygonsObjectsListeners(),this._deleteLabelsOMListeners()},o.prototype.getLabelState=function(t){return this._labelsState.get(t)},o.prototype.getConfiguredVisibility=function(t){return this._currentConfiguredVisibility.get(t)},o.prototype.getCurrentVisibility=function(t){return this._currentVisibility.get(t)},o.prototype._init=function(){this._map.geoObjects.add(this._labelsObjectManager),this._initLabelsOverlaysListeners(),this._initPolygonsObjectsListeners(),this._initPolygonsListeners(),this._initLabelsOMListeners(),this._firstCalculatePolygons(),this._initMapListeners()},o.prototype._firstCalculatePolygons=function(){this._calculatePolygons(function(t){t.createPlacemarks(),t.addToObjectManager()})},o.prototype._calculatePolygons=function(t){var e=this;return new Promise(function(o){e._polygonsObjectManager.objects.each(function(o){"Polygon"===o.geometry.type&&e._calculatePolygonLabelData(o).then(function(a){e._setInLabelState(o,"label",a),e._initLabelStateListener(o),t(a)})}),o()})},o.prototype._calculatePolygonLabelData=function(t,e){var o=this.getOptions(t),a=this.getZoomRangeOptions(t),n=e?this._getFromLabelState(t,"label"):new l(this._map,t,this._labelsObjectManager);return n.setLabelData(o,a),Promise.resolve(n)},o.prototype._analyzeAndSetLabelData=function(t,e,o,a){var n=o.setDataByZoom(this._map.getZoom(),e,a);this._setCurrentConfiguredVisibility(t,n.currentConfiguredVisibileType),this._setCurrentVisibility(t,n.currentVisibleType)},o.prototype._setCurrentConfiguredVisibility=function(t,e){this._currentConfiguredVisibility.set(t,e)},o.prototype._setCurrentVisibility=function(t,e){this._currentVisibility.set(t,-1!==["dot","label"].indexOf(e)?e:"none")},o.prototype._initLabelStateListener=function(t){var e=this,o=new n(this._labelsState.get(t));this._setInLabelState(t,"labelMonitor",o),o.add("visible",function(o){setTimeout(function(){e._dblClick?e._dblClick=!1:e._analyzeAndSetLabelData(t,["dot","label"],e._getFromLabelState(t,"label"),o)},100)})},o.prototype._initLabelsOverlaysListeners=function(){this._labelsObjectManager.objects.overlays.events.add(["add","remove"],this._labelsOverlaysEventHandler,this)},o.prototype._getLabelType=function(t){return-1!==t.indexOf("label#")?"label":"dot"},o.prototype._labelOverlaysGeometryChangeHandler=function(t){var e=this,o=t.get("target"),a=o._data.id;o.getLayout().then(function(t){var o=e._getLabelType(a),n=e._labelsObjectManager.objects.getById(a);if(n){var i=n.properties.polygon,l=e._getFromLabelState(i,"label");l.setLayout(o,t),e._analyzeAndSetLabelData(i,[o],l)}})},o.prototype._labelsOverlaysEventHandler=function(t){var e=this,o=t.get("objectId"),a=this._getLabelType(o),n=t.get("overlay");switch(t.get("type")){case"add":n.events.add("geometrychange",this._labelOverlaysGeometryChangeHandler,this),s(function(){n.getLayout().then(function(t){var n=e._labelsObjectManager.objects.getById(o);if(n){var i=n.properties.polygon,l=e._getFromLabelState(i,"label");l.setLayout(a,t),e._analyzeAndSetLabelData(i,[a],l)}})});break;case"remove":n.events.remove("geometrychange",this._labelOverlaysGeometryChangeHandler,this)}},o.prototype._setInLabelState=function(t,e,o){var n=this._labelsState.get(t);n||(n=new a,this._labelsState.set(t,n)),n.set(e,o)},o.prototype._getFromLabelState=function(t,e){var o=this._labelsState.get(t);if(o)return o.get(e)},o.prototype._clearVisibilityInLabelsState=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){t._setInLabelState(e,"visible",void 0)})},o.prototype._initMapListeners=function(){var t=this;this.initMapListeners(function(e){"dblclick"===e&&(t._dblClick=!0),"boundschange"===e&&t._clearVisibilityInLabelsState()})},o.prototype._initPolygonsObjectsListeners=function(){this._polygonsObjectManager.objects.events.add(["add","remove"],this._polygonCollectionEventHandler,this)},o.prototype._polygonCollectionEventHandler=function(t){switch(t.get("type")){case"add":var e=t.get("child");this._recalculateNewPolygon(e);break;case"remove":var o=t.get("child"),a=this._getFromLabelState(o,"label");a&&a.destroy()}},o.prototype._recalculateNewPolygon=function(t){var e=this;"Polygon"===t.geometry.type&&this._calculatePolygonLabelData(t).then(function(o){e._setInLabelState(t,"label",o),e._initLabelStateListener(t),o.createPlacemarks(),o.addToObjectManager()})},o.prototype._initPolygonsListeners=function(){this._polygonsObjectManager.objects.events.add(["optionschange","objectoptionschange"],this._onPolygonOptionsChangeHandler,this)},o.prototype._onPolygonOptionsChangeHandler=function(t){var e=this,o=this._polygonsObjectManager.objects.getById(t.get("objectId"));o&&this._calculatePolygonLabelData(o,!0).then(function(t){t.setVisibilityForce("none"),e._setInLabelState(o,"label",t),t.setLayoutTemplate(),t.setNewOptions(o.options),e._analyzeAndSetLabelData(o,["dot","label"],e._getFromLabelState(o,"label"))})},o.prototype._initLabelsOMListeners=function(){var t=this,e=new r({controllers:[{onBeforeEventFiring:function(e,o,a){var n=a.get("objectId");if(!n)return!1;var i=n.split("#")[1];i=isNaN(Number(i))?i:Number(i);var l=t._polygonsObjectManager.objects.getById(i),s=t._labelsObjectManager.objects.getById(n);return!(s&&"phantom"===s.options.pane||!l)&&(t._polygonsObjectManager.events.fire("label"+o,{objectId:i,type:"label"+o}),!1)}}]});this._labelsObjectManager.events.setParent(e)},o.prototype._deleteLabelStateListeners=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){"Polygon"===e.geometry.type&&t._deleteLabelStateListener(e)})},o.prototype._deleteLabelStateListener=function(t){var e=this._getFromLabelState(t,"labelMonitor");e&&e.removeAll()},o.prototype._deleteLabelsOverlaysListeners=function(){this._labelsObjectManager.objects.overlays.events.remove(["add","remove"],this._labelsOverlaysEventHandler,this)},o.prototype._deletePolygonsListeners=function(){this._polygonsObjectManager.objects.events.remove(["optionschange","objectoptionschange"],this._onPolygonOptionsChangeHandler,this)},o.prototype._deletePolygonsObjectsListeners=function(){this._polygonsObjectManager.objects.events.remove(["add","remove"],this._polygonCollectionEventHandler,this),this.destroyMapListeners()},o.prototype._deleteLabelsOMListeners=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){var o=t._getFromLabelState(e,"label");"Polygon"===e.geometry.type&&o&&o.destroy()}),this._clearLabels()},o.prototype._clearLabels=function(){this._labelsObjectManager.removeAll()},o}(o))}),ymaps.modules.define("src.polylabel.PolylabelObjectManager1",["util.defineClass","src.polylabel.PolylabelBase","data.Manager","Monitor","ObjectManager","src.label.ObjectManager.Label1","src.label.LabelData","system.nextTick","src.util.zoom.setZoomVisibility","event.Manager"],function(t,e,o,a,n,i,l,s,r,c,p){function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}t(function(t){function o(e,a){u(this,o);var n=b(this,t.call(this,e));return n._map=e,n._polygonsObjectManager=a,n._labelsObjectManager=new i,n._labelsState=new WeakMap,n._currentConfiguredVisibility=new WeakMap,n._currentVisibility=new WeakMap,n._layoutTemplateCache={},n._initData(),n}return e(o,t),o.prototype.destroy=function(){this._deleteLabelStateListeners(),this._deletePolygonsListeners(),this._deletePolygonCollectionListeners(),this._deleteLabelCollection()},o.prototype.getLabelState=function(t){return this._labelsState.get(t)},o.prototype.getConfiguredVisibility=function(t){return this._currentConfiguredVisibility.get(t)},o.prototype.getCurrentVisibility=function(t){return this._currentVisibility.get(t)},o.prototype._initData=function(){this._map.geoObjects.add(this._labelsObjectManager),this._initOverlaysListener(),this._firstCalculatePolygons(),this._initMapListeners(),this._initPolygonCollectionListeners(),this._initPolygonsListeners(),this._initLabelCollectionListeners()},o.prototype._firstCalculatePolygons=function(){var t=this;this._clearLabels(),this._polygonsObjectManager.objects.each(function(e){"Polygon"===e.geometry.type&&(t._setInLabelState(e,"visible",void 0),t._setInLabelState(e,"isNeedUpdate",!0),t._initLabelStateListener(e),t._calculatePolygonLabelData(e).then(function(o){t._setInLabelState(e,"label",o),o.addToObjectManager()}))})},o.prototype._calculatePolygons=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){"Polygon"===e.geometry.type&&t._analyzeAndSetLabelData(e,t._getFromLabelState(e,"label"))})},o.prototype._analyzeAndSetLabelData=function(t,e,o){if(!e)return Promise.resolve();var a=e.setDataByZoom(this._map.getZoom(),o);return this._setCurrentConfiguredVisibility(t,a.visible,a.visibleForce),this._setCurrentVisibility(t,a.visibleType),Promise.resolve()},o.prototype._setCurrentConfiguredVisibility=function(t,e,o){var a=o&&-1!==["dot","label","none"].indexOf(o)?o:e;this._currentConfiguredVisibility.set(t,a)},o.prototype._setCurrentVisibility=function(t,e){this._currentVisibility.set(t,-1!==["dot","label"].indexOf(e)?e:"none")},o.prototype._calculatePolygonLabelData=function(t,e){var o=this.getOptions(t),a=this.getZoomRangeOptions(t),n=(this.getProperties(t),e?this._getFromLabelState(t,"label"):new l(t,this._labelsObjectManager,this._layoutTemplateCache));return n.setLabelData(o,a),Promise.resolve(n)},o.prototype._initLabelStateListener=function(t){var e=this,o=new n(this._labelsState.get(t));this._setInLabelState(t,"labelMonitor",o),o.add("visible",function(o){e._analyzeAndSetLabelData(t,e._getFromLabelState(t,"label"),o)})},o.prototype._initOverlaysListener=function(){this._labelsObjectManager.objects.overlays.events.add("add",this._overlaysChangehandler,this)},o.prototype._overlaysChangehandler=function(t){var e=this,o=String(t.get("objectId")),a=-1!==o.indexOf("label#")?"label":"dot",n=t.get("overlay");r(function(){n.getLayout().then(function(t){var n=e._labelsObjectManager.objects.getById(o);if(n){var i=n.properties._labelPolygon,l=e._getFromLabelState(i,"label"),s=l.getLabelData();l.setLayout(a,t),e._getFromLabelState(i,"isNeedUpdate")&&c(e._map,s,l).then(function(){e._setInLabelState(i,"isNeedUpdate",!1),e._analyzeAndSetLabelData(i,l)})}})})},o.prototype._setInLabelState=function(t,e,o){var n=this._labelsState.get(t);n||(n=new a,this._labelsState.set(t,n)),n.set(e,o)},o.prototype._getFromLabelState=function(t,e){var o=this._labelsState.get(t);if(o)return o.get(e)},o.prototype._clearLabels=function(){this._labelsObjectManager.removeAll()},o.prototype._clearVisibilityInLabelsState=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){t._setInLabelState(e,"visible",void 0)})},o.prototype._initMapListeners=function(){var t=this;this.initMapListeners(function(){t._clearVisibilityInLabelsState(),t._calculatePolygons()})},o.prototype._initPolygonCollectionListeners=function(){this._polygonsObjectManager.objects.events.add(["add","remove"],this._polygonCollectionEventHandler,this)},o.prototype._polygonCollectionEventHandler=function(t){switch(t.get("type")){case"add":var e=this._polygonsObjectManager.objects.getById(t.get("objectId"));this._recalculateNewPolygon(e);break;case"remove":var o=t.get("child"),a=this._getFromLabelState(o,"label");a&&a.destroy()}},o.prototype._recalculateNewPolygon=function(t){var e=this;this._calculatePolygonLabelData(t).then(function(o){e._setInLabelState(t,"label",o),e._setInLabelState(t,"visible",void 0),e._setInLabelState(t,"isNeedUpdate",!0),e._initLabelStateListener(t),o.addToObjectManager()})},o.prototype._initPolygonsListeners=function(){this._polygonsObjectManager.objects.events.add(["optionschange","objectoptionschange"],this._onPolygonOptionsChangeHandler,this)},o.prototype._onPolygonOptionsChangeHandler=function(t){var e=this._polygonsObjectManager.objects.getById(t.get("objectId"));e&&this._calculatePolygonLabelData(e,!0).then(function(t){})},o.prototype._initLabelCollectionListeners=function(){var t=this,e=new p({controllers:[{onBeforeEventFiring:function(e,o,a){var n=a.get("objectId");if(!n)return!1;var i=n.split("#")[1],l=t._polygonsObjectManager.objects.getById(i),s=t._labelsObjectManager.objects.getById(n);return(!s||"phantom"!==s.options.pane)&&(l&&t._polygonsObjectManager.events.fire("label"+o,{objectId:i,type:"label"+o}),!1)}}]});this._labelsObjectManager.events.setParent(e)},o.prototype._deleteLabelStateListeners=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){"Polygon"===e.geometry.type&&t._deleteLabelStateListener(e)})},o.prototype._deleteLabelStateListener=function(t){var e=this._getFromLabelState(t,"labelMonitor");e&&e.removeAll()},o.prototype._deletePolygonsListeners=function(){this._polygonsObjectManager.objects.events.remove(["optionschange","objectoptionschange"],this._onPolygonOptionsChangeHandler,this)},o.prototype._deletePolygonCollectionListeners=function(){this._polygonsObjectManager.objects.events.remove(["add","remove"],this._polygonCollectionEventHandler,this),this.destroyMapListeners()},o.prototype._deleteLabelCollection=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){var o=t._getFromLabelState(e,"label");"Polygon"===e.geometry.type&&o&&o.destroy()}),this._clearLabels()},o}(o))}),ymaps.modules.define("src.polylabel.PolylabelObjectManager2",["util.defineClass","util.objectKeys","src.polylabel.PolylabelBase","data.Manager","Monitor","ObjectManager","src.label.ObjectManager.Label","system.nextTick","event.Manager"],function(t,e,o,a,n,i,l,s,r,c){function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}t(function(t){function a(e,o,n){p(this,a);var i=u(this,t.call(this,e));return i._callbackResult=n,i._map=e,i._polygonsObjectManager=o,i._labelsObjectManager=new l,i._labelsState=new WeakMap,i._currentConfiguredVisibility=new WeakMap,i._currentVisibility=new WeakMap,i._initData(),i}return e(a,t),a.prototype.destroy=function(){this._deleteLabelsOverlaysListener(),this._deleteLabelStateListeners(),this._deletePolygonsListeners(),this._deletePolygonCollectionListeners(),this._deleteLabelCollection()},a.prototype.getLabelState=function(t){return this._labelsState.get(t)},a.prototype.getConfiguredVisibility=function(t){return this._currentConfiguredVisibility.get(t)},a.prototype.getCurrentVisibility=function(t){return this._currentVisibility.get(t)},a.prototype._initData=function(){this._map.geoObjects.add(this._labelsObjectManager),this._initLabelsOverlaysListener(),this._firstCalculatePolygons(),this._initMapListeners(),this._initPolygonCollectionListeners(),this._initPolygonsListeners(),this._initLabelCollectionListeners()},a.prototype._firstCalculatePolygons=function(){var t=this;this._clearLabels(),this._polygonsObjectManager.objects.each(function(e){"Polygon"===e.geometry.type&&(t._setInLabelState(e,"visible",void 0),t._setInLabelState(e,"isNeedUpdate",!0),t._initLabelStateListener(e),t._calculatePolygonLabelData(e).then(function(o){t._setInLabelState(e,"label",o),o.addToObjectManager()}))})},a.prototype._calculatePolygons=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){"Polygon"===e.geometry.type&&t._analyzeAndSetLabelData(e,["dot","label"],t._getFromLabelState(e,"label"))})},a.prototype._analyzeAndSetLabelData=function(t,e,o,a){var n=this;o&&r(function(){var i=o.setDataByZoom(n._map.getZoom(),e,a);i&&(n._setCurrentConfiguredVisibility(t,i.visible,i.visibleForce),n._setCurrentVisibility(t,i.visibleType))})},a.prototype._setCurrentConfiguredVisibility=function(t,e,o){var a=o&&-1!==["dot","label","none"].indexOf(o)?o:e;this._currentConfiguredVisibility.set(t,a)},a.prototype._setCurrentVisibility=function(t,e){this._currentVisibility.set(t,-1!==["dot","label"].indexOf(e)?e:"none")},a.prototype._calculatePolygonLabelData=function(t,e){var o=this.getOptions(t),a=this.getZoomRangeOptions(t),n=e?this._getFromLabelState(t,"label"):new s(this._map,t,this._labelsObjectManager);return n.setLabelData(o,a),Promise.resolve(n)},a.prototype._recalculateLabelsCenter=function(t){var e=this;this._polygonsObjectManager.objects.each(function(o){var a=e._labelsObjectManager.objects.getById("label#"+o.id),n=e._getFromLabelState(o,"label").getLabelData().getAll();a.geometry.coordinates=n.zoomInfo[t].center||n.autoCenter})},a.prototype._initLabelStateListener=function(t){var e=this,o=new i(this._labelsState.get(t));this._setInLabelState(t,"labelMonitor",o),o.add("visible",function(o){e._analyzeAndSetLabelData(t,["dot","label"],e._getFromLabelState(t,"label"),o)})},a.prototype._initLabelsOverlaysListener=function(){this._labelsObjectManager.objects.overlays.events.add(["add","remove"],this._labelsOverlaysEventHandler,this)},a.prototype._getLabelType=function(t){return-1!==t.indexOf("label#")?"label":"dot"},a.prototype._labelOverlaysGeometryChangeHandler=function(t){var e=t.get("target"),o=e._data.id,a=this._getLabelType(o);this._getLayoutAndAnalyze(e,o,a)},a.prototype._getLayoutAndAnalyze=function(t,e,o){var a=this;t.getLayout().then(function(t){var n=a._labelsObjectManager.objects.getById(e);if(n){var i=n.properties.labelPolygon,l=a._getFromLabelState(i,"label");l.setLayout(o,t),a._analyzeAndSetLabelData(i,[o],l)}})},a.prototype._labelsOverlaysEventHandler=function(t){var e=this,o=t.get("objectId"),a=this._getLabelType(o),n=t.get("overlay");switch(t.get("type")){case"add":n.events.add("geometrychange",this._labelOverlaysGeometryChangeHandler,this),r(function(){e._getLayoutAndAnalyze(n,o,a)});break;case"remove":n.events.remove("geometrychange",this._labelOverlaysGeometryChangeHandler,this)}},a.prototype._setInLabelState=function(t,e,o){var a=this._labelsState.get(t);a||(a=new n,this._labelsState.set(t,a)),a.set(e,o)},a.prototype._getFromLabelState=function(t,e){var o=this._labelsState.get(t);if(o)return o.get(e)},a.prototype._clearLabels=function(){this._labelsObjectManager.removeAll()},a.prototype._clearVisibilityInLabelsState=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){t._setInLabelState(e,"visible",void 0)})},a.prototype._initMapListeners=function(){var t=this;this.initMapListeners(function(e){t._recalculateLabelsCenter(e),t._clearVisibilityInLabelsState()})},a.prototype._initPolygonCollectionListeners=function(){this._polygonsObjectManager.objects.events.add(["add","remove"],this._polygonCollectionEventHandler,this)},a.prototype._polygonCollectionEventHandler=function(t){switch(t.get("type")){case"add":var e=this._polygonsObjectManager.objects.getById(t.get("objectId"));this._recalculateNewPolygon(e);break;case"remove":var o=t.get("child"),a=this._getFromLabelState(o,"label");a&&a.destroy()}},a.prototype._recalculateNewPolygon=function(t){var e=this;this._calculatePolygonLabelData(t).then(function(o){e._setInLabelState(t,"label",o),e._setInLabelState(t,"visible",void 0),e._setInLabelState(t,"isNeedUpdate",!0),e._initLabelStateListener(t),o.addToObjectManager()})},a.prototype._initPolygonsListeners=function(){this._polygonsObjectManager.objects.events.add(["optionschange","objectoptionschange"],this._onPolygonOptionsChangeHandler,this)},a.prototype._onPolygonOptionsChangeHandler=function(t){var e=this,o=this._polygonsObjectManager.objects.getById(t.get("objectId"));o&&this._calculatePolygonLabelData(o,!0).then(function(a){a.setVisibility("phantom"),e._setInLabelState(o,"label",a),a.setLayoutTemplate(),a.setNewOptions(o.options),e._getLabelsOverlays(t.get("objectId")).then(function(t){var n=["dot","label"];t.forEach(function(t,e){a.setLayout(n[e],t)}),e._analyzeAndSetLabelData(o,n,e._getFromLabelState(o,"label"))})})},a.prototype._getLabelsOverlays=function(t){var e=this,a=["dot","_dot","label","_label"].reduce(function(o,a){var n=e._labelsObjectManager.objects.overlays.getById(a+"#"+t),i="_"===a[0]?a.slice(1):a;return n&&(o[i]=n),o},{}),n=o(a).map(function(t){return a[t].getLayout()});return Promise.all(n)},a.prototype._initLabelCollectionListeners=function(){var t=this,e=new c({controllers:[{onBeforeEventFiring:function(e,o,a){var n=a.get("objectId");if(!n)return!1;var i=n.split("#")[1];i=isNaN(Number(i))?i:Number(i);var l=t._polygonsObjectManager.objects.getById(i),s=t._labelsObjectManager.objects.getById(n);return(!s||"phantom"!==s.options.pane)&&(l&&t._polygonsObjectManager.events.fire("label"+o,{objectId:i,type:"label"+o}),!1)}}]});this._labelsObjectManager.events.setParent(e)},a.prototype._deleteLabelStateListeners=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){"Polygon"===e.geometry.type&&t._deleteLabelStateListener(e)})},a.prototype._deleteLabelStateListener=function(t){var e=this._getFromLabelState(t,"labelMonitor");e&&e.removeAll()},a.prototype._deleteLabelsOverlaysListener=function(){this._labelsObjectManager.objects.overlays.events.remove(["add","remove"],this._labelsOverlaysEventHandler,this)},a.prototype._deletePolygonsListeners=function(){this._polygonsObjectManager.objects.events.remove(["optionschange","objectoptionschange"],this._onPolygonOptionsChangeHandler,this)},a.prototype._deletePolygonCollectionListeners=function(){this._polygonsObjectManager.objects.events.remove(["add","remove"],this._polygonCollectionEventHandler,this),this.destroyMapListeners()},a.prototype._deleteLabelCollection=function(){var t=this;this._polygonsObjectManager.objects.each(function(e){var o=t._getFromLabelState(e,"label");"Polygon"===e.geometry.type&&o&&o.destroy()}),this._clearLabels()},a}(a))}),ymaps.modules.define("util.createPolylabel",["src.polylabel.PolylabelCollection","src.polylabel.PolylabelObjectManager","ObjectManager"],function(t,e,o,a){t(function(t,n){return n instanceof a?new o(t,n):new e(t,n)})}),ymaps.modules.define("src.util.checkPointPosition",[],function(t){function e(t,e,i){var l=o(i,e),s=o(t,e),r=l[0]*s[1]-s[0]*l[1];return r>0?"LEFT":r<0?"RIGHT":l[0]*s[0]<0||l[1]*s[1]<0?"BEHIND":a(l)<a(s)?"BEYOND":n(e,t)?"ORIGIN":n(i,t)?"DESTINATION":"BETWEEN"}function o(t,e){return[t[0]-e[0],t[1]-e[1]]}function a(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function n(t,e){return t[0]===e[0]&&t[1]===e[1]}function i(t,o){var a=o[0],n=o[1];switch(e(t,a,n)){case"LEFT":return a[1]<t[1]&&t[1]<=n[1]?"CROSSING":"INESSENTIAL";case"RIGHT":return n[1]<t[1]&&t[1]<=a[1]?"CROSSING":"INESSENTIAL";case"BETWEEN":case"ORIGIN":case"DESTINATION":return"TOUCHING";default:return"INESSENTIAL"}}t(function(t,e){for(var o=0,a=0;a<e.length-1;a++)switch(i(t,[e[a],e[a+1]])){case"TOUCHING":return"BOUNDARY";case"CROSSING":o=1-o}return o?"INSIDE":"OUTSIDE"})}),ymaps.modules.define("src.util.createDefaultLabelData",["src.config"],function(t,e){var o=e.MIN_ZOOM,a=e.MAX_ZOOM;t(function(){for(var t={zoomInfo:{},autoCenter:[0,0],polygonIndex:0,dotSize:{height:0,width:0}},e=o;e<=a;e++)t.zoomInfo[e]={visible:"none",visibleForce:"auto",center:void 0,style:{className:void 0,textSize:void 0,textColor:void 0},labelSize:{height:0,width:0},labelOffset:[0,0],permissibleInaccuracyOfVisibility:0};return t})}),ymaps.modules.define("src.util.getPolesOfInaccessibility",["util.calculateArea","GeoObject"],function(t,e,o){function a(t,e){if(!(this instanceof a))return new a(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||n,this.length>0)for(var o=this.length>>1;o>=0;o--)this._down(o)}function n(t,e){return t<e?-1:t>e?1:0}function i(t,e,o){e=e||1;for(var a,n,i,r,p=0;p<t[0].length;p++){var b=t[0][p];(!p||b[0]<a)&&(a=b[0]),(!p||b[1]<n)&&(n=b[1]),(!p||b[0]>i)&&(i=b[0]),(!p||b[1]>r)&&(r=b[1])}var y=i-a,h=r-n,d=Math.min(y,h),f=d/2,_=new u(null,l);if(0===d)return[a,n];for(var g=a;g<i;g+=d)for(var m=n;m<r;m+=d)_.push(new s(g+f,m+f,f,t));var v=c(t),L=new s(a+y/2,n+h/2,0,t);L.d>v.d&&(v=L);for(var O=_.length;_.length;){var C=_.pop();C.d>v.d&&(v=C,o&&console.error("found best %d after %d probes",Math.round(1e4*C.d)/1e4,O)),C.max-v.d<=e||(f=C.h/2,_.push(new s(C.x-f,C.y-f,f,t)),_.push(new s(C.x+f,C.y-f,f,t)),_.push(new s(C.x-f,C.y+f,f,t)),_.push(new s(C.x+f,C.y+f,f,t)),O+=4)}return o&&(console.error("num probes: "+O),console.error("best distance: "+v.d)),[v.x,v.y]}function l(t,e){return e.max-t.max}function s(t,e,o,a){this.x=t,this.y=e,this.h=o,this.d=r(t,e,a),this.max=this.d+this.h*Math.SQRT2}function r(t,e,o){for(var a=!1,n=1/0,i=0;i<o.length;i++)for(var l=o[i],s=0,r=l.length,c=r-1;s<r;c=s++){var u=l[s],b=l[c];u[1]>e!=b[1]>e&&t<(b[0]-u[0])*(e-u[1])/(b[1]-u[1])+u[0]&&(a=!a),n=Math.min(n,p(t,e,u,b))}return(a?1:-1)*Math.sqrt(n)}function c(t){for(var e=0,o=0,a=0,n=t[0],i=0,l=n.length,r=l-1;i<l;r=i++){var c=n[i],p=n[r],u=c[0]*p[1]-p[0]*c[1];o+=(c[0]+p[0])*u,a+=(c[1]+p[1])*u,e+=3*u}return 0===e?new s(n[0][0],n[0][1],0,t):new s(o/e,a/e,0,t)}function p(t,e,o,a){var n=o[0],i=o[1],l=a[0]-n,s=a[1]-i;if(0!==l||0!==s){var r=((t-n)*l+(e-i)*s)/(l*l+s*s);r>1?(n=a[0],i=a[1]):r>0&&(n+=l*r,i+=s*r)}return l=t-n,s=e-i,l*l+s*s}t(function(t,a,n){if(void 0===e)throw new Error("Didn't find calculateArea module");var l=Number.MIN_VALUE,s=0,r=void 0;if(t.length>1){for(var c=0;c<t.length;c++){var p=new o({geometry:{type:"Polygon",coordinates:[t[c]]}}),u=Math.round(e(p));l<u&&(l=u,s=c)}r=[t[s]]}else r=t;return{center:i(r,a,n),index:s}}),a.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return--this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,o=this.compare,a=e[t];t>0;){var n=t-1>>1,i=e[n];if(o(a,i)>=0)break;e[t]=i,t=n}e[t]=a},_down:function(t){for(var e=this.data,o=this.compare,a=this.length>>1,n=e[t];t<a;){var i=1+(t<<1),l=i+1,s=e[i];if(l<this.length&&o(e[l],s)<0&&(i=l,s=e[l]),o(s,n)>=0)break;e[t]=s,t=i}e[t]=n}};var u=a}),ymaps.modules.define("src.util.SpeedTester",[],function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t(function(){function t(){e(this,t)}return t.prototype.start=function(){this._start=performance.now()},t.prototype.finish=function(){return performance.now()-this._start},t.prototype.startByCount=function(t){this._count=t},t.prototype.decrementCountAndCheck=function(){return--this._count<=0},t}())}),ymaps.modules.define("src.util.stringReplacer",[],function(t){t(function(t,e){var o=t;return e.forEach(function(t,e){o=o.replace(new RegExp("\\$"+(e+1),"g"),t)}),o})}),ymaps.modules.define("src.util.zoom.getFirstZoomInside",["src.util.checkPointPosition","src.config"],function(t,e,o){function a(t,e,o,a,n,i){var l=t.options.get("projection").toGlobalPixels(e,o),s=a.width,r=a.height;l[0]+=n[0],l[1]+=n[1];var c=[],p=[];return c.push([l[0]-s/2,l[1]-r/2],[l[0]-s/2,l[1]+r/2],[l[0]+s/2,l[1]-r/2],[l[0]+s/2,l[1]+r/2]),p.push([c[0][0]+i>l[0]?l[0]:c[0][0]+i,c[0][1]+i>l[1]?l[1]:c[0][1]+i],[c[1][0]+i>l[0]?l[0]:c[1][0]+i,c[1][1]-i<l[1]?l[1]:c[1][1]-i],[c[2][0]-i<l[0]?l[0]:c[2][0]-i,c[2][1]+i>l[1]?l[1]:c[2][1]+i],[c[3][0]-i<l[0]?l[0]:c[3][0]-i,c[3][1]-i<l[1]?l[1]:c[3][1]-i]),{normal:c,withInaccuracy:p}}function n(t,o,a,n){for(var i=0;i<a.length;i++){var l=t.options.get("projection").fromGlobalPixels(a[i],n);if("INSIDE"!==e(l,o))return!1}return!0}t(function(t,e,i,l,s,r){for(var c=o.MIN_ZOOM,p=o.MAX_ZOOM,u=void 0;c<p;){u=Math.floor((c+p)/2);var b=isNaN(Number(r))?0:Number(r),y=a(t,e,u,l,s||[0,0],b);n(t,i,y.normal,u)||0!==b&&n(t,i,y.withInaccuracy,u)?p=u:c=u+1}return c})}),ymaps.modules.define("src.util.zoom.parseZoomData",["util.array","util.objectKeys","src.config"],function(t,e,o,a){function n(t,e,o){t[e]=o}function i(t,e,o){if(isNaN(Number(e))){var a=e.split("_").map(Number);if(!isNaN(a[0])&&!isNaN(a[1]))for(var n=a[0]<r?r:a[0],i=a[1]>c?c:a[1];n<=i;)t[n]=o,n++}else t[Number(e)]=o}function l(t){for(var e={},o=r;o<=c;o++)e[o]=t;return e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=a.MIN_ZOOM,c=a.MAX_ZOOM;t(function(t){var a=["number","string","boolean","object"];return t&&!e.isArray(t)&&"object"===(void 0===t?"undefined":s(t))?o(t).reduce(function(e,o){return"string"==typeof o?i(e,o,t[o]):"number"==typeof o&&n(e,o,t[o]),e},l()):a.includes(void 0===t?"undefined":s(t))?l(t):void 0})}),ymaps.modules.define("src.util.zoom.setOneZoomVisibility",["src.util.zoom.getFirstZoomInside","src.label.util.getLayoutSize"],function(t,e,o){function a(t,e,o){var a=["none","dot","label"],n=t;return o&&(n=a.indexOf(e)>a.indexOf(t)?e:t),n}var n={label:function(t,n,i,l,s,r){var c=o(r);if(!c)return!1;var p=l.getAll(),u=p.zoomInfo[n];l.setZoomInfo(n,"labelSize",c);var b=e(t,u.center||p.autoCenter,s,c,u.labelOffset,u.permissibleInaccuracyOfVisibility);return l.setZoomInfo(n,"visible",a(u.visible,"label",n>=b)),!0},dot:function(t,n,i,l,s,r){var c=o(r);if(!c)return!1;var p=l.getAll(),u=l.getZoomInfo(n);l.setData("dotSize",c);var b=e(t,u.center||p.autoCenter,s,c,u.labelOffset,u.permissibleInaccuracyOfVisibility);return l.setZoomInfo(n,"visible",a(u.visible,"dot",n>=b)),!0}};t(function(t,e,o,a){var i=o.getLabelData(),l=i.getPolygonCoords();return n[a](t,e,o,i,l,o.getLayout(a))})}),ymaps.modules.define("src.util.zoom.setZoomVisibility",["src.util.zoom.getFirstZoomInside","src.label.util.getLayoutSize"],function(t,e,o){function a(t,e,o){var a=["none","dot","label"],n=t;return o&&(n=a.indexOf(e)>a.indexOf(t)?e:t),n}function n(t,n,i,l,s,r,c,p,u){var b=o(s);if(b)return{visible:a(l,t,i>=e(n,r,c,b,p,u)),size:b}}t(function(t,e,o,a,i,l,s,r,c){return n(t,e,o,a,i,l,s,r,c)})});